{
    "name": "Apache Celix Dev Container",
    "build": {
        "dockerfile": "Containerfile",
        "target": "conan-dev"
    },
    "runArgs": [
        "--userns=keep-id"
    ],
    "mounts": [
        "type=volume,source=celixdev-conan-package-cache,target=/home/celixdev/.conan2/p",
        "type=volume,source=celixdev-conan-download-cache,target=/home/celixdev/.conan2/d",
        "type=volume,source=celixdev-ccache-cache,target=/home/celixdev/.ccache"
    ],
    "containerEnv": {
        "CONAN_PROFILE": "debug",
        "CONAN_OPTS": "--options celix/*:build_all=True --options celix/*:enable_address_sanitizer=True --options celix/*:enable_testing=True --options celix/*:enable_ccache=True --options celix/*:enable_code_coverage=True",
        "CONAN_CONF": "--conf tools.cmake.cmaketoolchain:generator=Ninja"
    },
    "securityOpt": [
        "label=disable"
    ],
    "remoteUser": "celixdev",
    "containerUser": "celixdev",
    "postCreateCommand": "conan install . --build missing --profile ${CONAN_PROFILE} ${CONAN_OPTS} ${CONAN_CONF}",
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-vscode.cpptools-extension-pack",
                "ms-vscode.cpptools",
                "matepek.vscode-catch2-test-adapter",
                "ms-vscode.cmake-tools"
            ]
        },
        "jetbrains": {
            "backend": "CLion"
        }
    }
}
